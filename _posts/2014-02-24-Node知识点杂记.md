---
layout: post
title: Node 知识点杂记
---

{{ page.title }}
=================

<p class="meta">24 Feb 2014 - Node 知识点杂记</p>

<p>
	<h2>
		第一章 Node简介
	</h2>
	1.	浏览器端V8与Webkit共用一个线程，当浏览器进行渲染的时候会影响JS的执行，同时JS的执行也会影响到Web的渲染；<br/>
	2.	Node 具有单线程的特点，有利也有弊，可以通过child_process实现子进程；<br/>
	3.	Node 对于Post请求可以通过res.on("data", function(trunk){})和res.on("end", function(){})接受数据；Get请求需要通过URL模块获取；当然对于Http的请求参数的操作，通过querystring模块进行处理非常方便；<br/>
	4.	相对于CPU密集型场景，Node更适合IO密集型Web应用，对于任务单一、并发性要求高的需求最为合适

</p>

<p>
	<h2>
		第二章 模块机制
	</h2>
	1.	CommonJS简单的说就是：FS、TCP、Stream、Buffer...的一套规范，也是JS作为后端语言所缺少但又必须的功能模块，CommonJS与ECMAScript共同组成Node；<br/>
	2.	Node模块可以分为两类：一类Node提供的模块，称为核心模块；另一类用户编写的模块，称为文件模块，核心模块优先于文件模块；<br/>
	3.	核心模块包含：JavaScript模块和C/C++内建模块，文件模块依赖于核心模块，核心模块依赖于内建模块
</p>

<p>
	<h2>
		第三章 异步I/O
	</h2>
	1.	异步IO和非阻塞IO的区别，非阻塞IO不带数据直接返回，要获取数据需要通过轮询手段读取，类似于C++的Server，而轮询方案中epoll是Linux下效率最高的IO时间通知机制，它真实利用了事件通知、执行回调的方式，而不是遍历查询。Nginx的事件机制也是通过epoll实现的。<br/>
	2.	Node的单线程，仅仅是JS执行在单线程中，Node的内部完成IO任务的都另有线程池；<br/>
	3.	事件监听的实现大都基于观察者模式，通过时间循环向观察者询问是否有要处理的事件。事件循环是典型的生产者/消费者模型。<br/>
	4. setTimeout/setInterval/setImmediate/process.nextTick区别，定时器并非准确的（容忍范围内），由于没有sleep方法，所以只能通过这些定时器实现；setTimeout较为浪费性能，process.nextTick()相对较为轻量；process.nextTick()中回调函数的优先级高于setImmediate()，process.nextTick()属于idle观察者，setImmediate属于check观察者，轮询中，idle观察者先于I/O观察者，I/O观察者先于check观察者。<br/>
	5. 事件循环是异步实现的核心
</p>

<p>
	后续敬请期待
</p>

本文摘自 朴灵《深入浅出NodeJS》

