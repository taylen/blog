---
layout: post
title: Node 杂谈
---

{{ page.title }}
=================

<p class="meta">21 Feb 2014 - Node 杂谈</p>

<p>Node出来已经很久了，断断续续研究过一点，最近空余时间有点多，就系统的学习了下，不知道入门没？</p>

一、Node起源<br/>
二、Node基本原理<br/>
三、Node优缺点<br/>
四、Node适用场景<br/>

一、Node起源<br/>
<p>Node的原意是作者Ryan Dahl想开发一个基于事件驱动、非阻塞I/O的Web服务器，提供Apache等服务器之外的选择，在当初的语言选型过程中，综合考虑语言门槛、事件驱动机制，选择了JavaScript实现Node，最后Node却发展成为了一个构建快速、可伸缩的网络应用的平台，</p>

二、Node基本原理
<p>作为一名前端人名，先从JS说起，浏览器端的JavaScript可以看做是：BOM+DOM+ECMAScript，其中BOM+DOM并不属于JavaScript，它们是W3C的标准，只不过在浏览器端JS和它们交互最多，密不可分，所以前端的JS常常默认包含了BOM和DOM，但是也正是各个浏览器对BOM和DOM的实现不一致，所以问题一是出现了浏览器兼容性的问题，问题二是JavaScript的应用范围完全被浏览器这个宿主环境限制了。</p>

<p>Node作为服务器端运行的服务器，不需要BOM和DOM了，脱离了浏览器的限制，而ECMAScript是标准的JavaScript规范，在浏览器端运行已久，Chrome内置的V8引擎也是目前为止性能最高的JavaScript引擎，Node没有必要重新开发一套。但是作为服务器端语言，文件操作、内存操作、二进制操作、网络请求等都是必须有的，但是当初考虑前端安全问题，ECMAScript中并没有包含这些，于是作者实现了一套：File System/Buffer/Stream/Net/HTTP/OS等，而这一套实现也形成了一个规范，即CommonJS，CommonJS和ECMAScript共同组成了Node。ECMAScript的执行还是依赖于V8引擎，但是CommonJS涉及到的内容需要利用中间层实现，即libuv。</p>

<p>Libuv是根据CommonJs标准，利用C/C++实现的一套API，兼容*inx和windows平台，Nginx的中间层也用到了libuv。</p>

三、Node优缺点<br/>
<p>优点：基于事件驱动；异步执行；单进程单线程</p>
<p>缺点：不适合CPU密集服务；不能充分利用多核CPU；程序异常会直接退出</p>
<p>当然确定都可以通过手段去优化，例如：可以利用child_process实现进程复制，从而利用多核CPU，也可以保证程序的健壮性。</p>

四、Node适用场景<br/>
<p>适合I/O密集型Web服务；不太擅长CPU密集型Web服务。</p>
<p>I/O密集包括文件操作、数据库操作、网络端口、网卡等操作，之所以不擅长CPU密集型服务，也是I/O异步所决定的，如果CPU处理过长，会导致请求长时间不能处理，Nginx也会有这个问题，所以Nginx更适合反向代理服务；Node更适合处理业务逻辑简单的高并发应用。</p>



本文内容参考自：朴灵《深入浅出Node.js》

